bar_fight_initialisation_pentarchy_side = {
	bar_fight_initialisation = yes
	set_variable = {
		bar_pentarchy_fight_show = 1
	}
	bar_pen_fight_gui_reload = yes
}

bar_fight_initialisation_viira_side = {
	bar_fight_initialisation = yes
	set_variable = {
		bar_viira_fight_show = 1
	}
	bar_viira_fight_gui_reload = yes
}

bar_fight_initialisation = {
	set_variable = {
		BAR_fight_pentarchy_action = 0
	}
	if = {
		limit = {
			has_country_flag = barrad_asinti_alive
		}
		#base Asinti stats
		set_variable = {
			a_live = 1
		}
		set_variable = {
			a_hp = 190
		}
		set_variable = {
			a_hp_max = 190
		}
		set_variable = {
			a_in = 10
		}
		#max hp index is used to determine loop limit
		set_variable = {
			a_max_hp_index = a_hp_max
		}
		divide_variable = {
			a_max_hp_index = 10
		}
		round_variable = a_max_hp_index
		add_to_variable = {
			a_max_hp_index = 1			#index must be bigger by 1 than max hp value
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
		}
		#base Silver Star stats
		set_variable = {
			s_live = 1
		}
		set_variable = {
			s_hp = 170
		}
		set_variable = {
			s_hp_max = 170
		}
		set_variable = {
			s_in = 10
		}
		#max hp index is used to determine loop limit
		set_variable = {
			s_max_hp_index = s_hp_max
		}
		divide_variable = {
			s_max_hp_index = 10
		}
		round_variable = s_max_hp_index
		add_to_variable = {
			s_max_hp_index = 1			#index must be bigger by 1 than max hp value
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_leopold_alive
		}
		#base Leopold stats
		set_variable = {
			l_live = 1
		}
		set_variable = {
			l_hp = 220
		}
		set_variable = {
			l_hp_max = 220
		}
		set_variable = {
			l_in = 10
		}
		#max hp index is used to determine loop limit
		set_variable = {
			l_max_hp_index = l_hp_max
		}
		divide_variable = {
			l_max_hp_index = 10
		}
		round_variable = l_max_hp_index
		add_to_variable = {
			l_max_hp_index = 1			#index must be bigger by 1 than max hp value
		}
	}
	#base Viira stats
	set_variable = {
		v_hp = 280
	}
	set_variable = {
		v_hp_max = 280
	}
	set_variable = {
		v_in = 20
	}
	set_variable = {
		v_stun = 0
	}
	set_variable = {
		viira_dmg_debuff = 1
	}
	#max hp index is used to determine loop limit
	set_variable = {
		v_max_hp_index = v_hp_max
	}
	divide_variable = {
		v_max_hp_index = 10
	}
	round_variable = v_max_hp_index
	add_to_variable = {
		v_max_hp_index = 1		#index must be bigger by 1 than max hp value
	}
	set_variable = {
		bar_pen_fight_silver_state = 1
	}
	set_variable = {
		bar_pen_fight_lepold_state = 1
	}
	set_variable = {
		bar_pen_fight_asinti_state = 1
	}
	set_variable = {
		bar_pen_fight_viira_state = 1
	}
}

bar_pen_fight_gui_reload = {
	bar_fight_gui_reload = yes
	add_to_variable = {
		bar_pentarchy_fight_show = 1
	}
}

bar_viira_fight_gui_reload = {
	bar_fight_gui_reload = yes
	add_to_variable = {
		bar_viira_fight_show = 1
	}
}

bar_fight_gui_reload = {
	BAR_fight_pentarchy_viira_initiative = yes
	BAR_fight_pentarchy_silver_initiative = yes
	BAR_fight_pentarchy_leopold_initiative = yes
	BAR_fight_pentarchy_asinti_initiative = yes
	bar_fight_viira_hp = yes
	bar_fight_silver_hp = yes
	bar_fight_leopold_hp = yes
	bar_fight_asinti_hp = yes
}

bar_fight_silver_hp = {
	#hp is shown as 1 hearth == 10hp, current_hp_index shows that representation from current hp
	set_variable = {
		s_current_hp_index = s_hp
	}
	divide_variable = {
		s_current_hp_index = 10
	}
	round_variable = s_current_hp_index
	#looping thought hp and updating gui vars
	for_loop_effect = {
		start = 1
		end = s_max_hp_index
		value = hp_index
		set_temp_variable = {
			hp_mult_value = hp_index
		}
		multiply_temp_variable = {
			hp_mult_value = 10
		}
		meta_effect = {
			text = {
				if = {
					limit = {
						check_variable = {
							var = hp_index
							value = s_current_hp_index
							compare = equals
						}
						check_variable = {
							var = s_hp
							value = hp_mult_value
							compare = not_equals
						}
					}
					set_variable = {
						s_hp_d_[HP_VALUE] = 2
					}
				}
				else_if = {
					limit = {
						check_variable = {
							var = hp_index
							value = s_current_hp_index
							compare = less_than_or_equals
						}
					}
					set_variable = {
						s_hp_d_[HP_VALUE] = 1
					}
				}
				else = {
					set_variable = {
						s_hp_d_[HP_VALUE] = 3
					}
				}
			}
			HP_VALUE = "[?hp_mult_value]"
		}
	}
}

bar_fight_leopold_hp = {
	#hp is shown as 1 hearth == 10hp, current_hp_index shows that representation from current hp
	set_variable = {
		l_current_hp_index = l_hp
	}
	divide_variable = {
		l_current_hp_index = 10
	}
	round_variable = l_current_hp_index
	#looping thought hp and updating gui vars
	for_loop_effect = {
		start = 1
		end = l_max_hp_index
		value = hp_index
		set_temp_variable = {
			hp_mult_value = hp_index
		}
		multiply_temp_variable = {
			hp_mult_value = 10
		}
		meta_effect = {
			text = {
				if = {
					limit = {
						check_variable = {
							var = hp_index
							value = l_current_hp_index
							compare = equals
						}
						check_variable = {
							var = l_hp
							value = hp_mult_value
							compare = not_equals
						}
					}
					set_variable = {
						l_hp_d_[HP_VALUE] = 2
					}
				}
				else_if = {
					limit = {
						check_variable = {
							var = hp_index
							value = l_current_hp_index
							compare = less_than_or_equals
						}
					}
					set_variable = {
						l_hp_d_[HP_VALUE] = 1
					}
				}
				else = {
					set_variable = {
						l_hp_d_[HP_VALUE] = 3
					}
				}
			}
			HP_VALUE = "[?hp_mult_value]"
		}
	}
}

bar_fight_viira_hp = {
	#hp is shown as 1 hearth == 10hp, current_hp_index shows that representation from current hp
	set_variable = {
		v_current_hp_index = v_hp
	}
	divide_variable = {
		v_current_hp_index = 10
	}
	round_variable = v_current_hp_index
	#looping thought hp and updating gui vars
	for_loop_effect = {
		start = 1
		end = v_max_hp_index
		value = hp_index
		set_temp_variable = {
			hp_mult_value = hp_index
		}
		multiply_temp_variable = {
			hp_mult_value = 10
		}
		meta_effect = {
			text = {
				if = {
					limit = {
						check_variable = {
							var = hp_index
							value = v_current_hp_index
							compare = equals
						}
						check_variable = {
							var = v_hp
							value = hp_mult_value
							compare = not_equals
						}
					}
					set_variable = {
						v_hp_d_[HP_VALUE] = 2
					}
				}
				else_if = {
					limit = {
						check_variable = {
							var = hp_index
							value = v_current_hp_index
							compare = less_than_or_equals
						}
					}
					set_variable = {
						v_hp_d_[HP_VALUE] = 1
					}
				}
				else = {
					set_variable = {
						v_hp_d_[HP_VALUE] = 3
					}
				}
			}
			HP_VALUE = "[?hp_mult_value]"
		}
	}
}

bar_fight_asinti_hp = {
	#hp is shown as 1 hearth == 10hp, current_hp_index shows that representation from current hp
	set_variable = {
		a_current_hp_index = a_hp
	}
	divide_variable = {
		a_current_hp_index = 10
	}
	round_variable = a_current_hp_index
	#looping thought hp and updating gui vars
	for_loop_effect = {
		start = 1
		end = a_max_hp_index
		value = hp_index
		set_temp_variable = {
			hp_mult_value = hp_index
		}
		multiply_temp_variable = {
			hp_mult_value = 10
		}
		meta_effect = {
			text = {
				if = {
					limit = {
						check_variable = {
							var = hp_index
							value = a_current_hp_index
							compare = equals
						}
						check_variable = {
							var = a_hp
							value = hp_mult_value
							compare = not_equals
						}
					}
					set_variable = {
						a_hp_d_[HP_VALUE] = 2
					}
				}
				else_if = {
					limit = {
						check_variable = {
							var = hp_index
							value = a_current_hp_index
							compare = less_than_or_equals
						}
					}
					set_variable = {
						a_hp_d_[HP_VALUE] = 1
					}
				}
				else = {
					set_variable = {
						a_hp_d_[HP_VALUE] = 3
					}
				}
			}
			HP_VALUE = "[?hp_mult_value]"
		}
	}
}

BAR_fight_pentarchy_leopold_initiative = {
	for_loop_effect = {
		start = 1
		end = 11
		value = initiative_index
		meta_effect = {
			text = {
				if = {
					limit = {
						check_variable = {
							l_in < initiative_index
						}
					}
					set_variable = {
						l_in_d_[INITIATIVE_INDEX] = 2
					}
				}
				else = {
					set_variable = {
						l_in_d_[INITIATIVE_INDEX] = 1
					}
				}
			}
			INITIATIVE_INDEX = "[?INITIATIVE_INDEX]"
		}
	}
}

BAR_fight_pentarchy_silver_initiative = {
	for_loop_effect = {
		start = 1
		end = 11
		value = initiative_index
		meta_effect = {
			text = {
				if = {
					limit = {
						check_variable = {
							s_in < initiative_index
						}
					}
					set_variable = {
						s_in_d_[INITIATIVE_INDEX] = 2
					}
				}
				else = {
					set_variable = {
						s_in_d_[INITIATIVE_INDEX] = 1
					}
				}
			}
			INITIATIVE_INDEX = "[?INITIATIVE_INDEX]"
		}
	}
}

BAR_fight_pentarchy_asinti_initiative = {
	for_loop_effect = {
		start = 1
		end = 11
		value = initiative_index
		meta_effect = {
			text = {
				if = {
					limit = {
						check_variable = {
							a_in < initiative_index
						}
					}
					set_variable = {
						a_in_d_[INITIATIVE_INDEX] = 2
					}
				}
				else = {
					set_variable = {
						a_in_d_[INITIATIVE_INDEX] = 1
					}
				}
			}
			INITIATIVE_INDEX = "[?INITIATIVE_INDEX]"
		}
	}
}

BAR_fight_pentarchy_viira_initiative = {
	for_loop_effect = {
		start = 1
		end = 21
		value = initiative_index
		meta_effect = {
			text = {
				if = {
					limit = {
						check_variable = {
							v_in < initiative_index
						}
					}
					set_variable = {
						v_in_d_[INITIATIVE_INDEX] = 2
					}
				}
				else = {
					set_variable = {
						v_in_d_[INITIATIVE_INDEX] = 1
					}
				}
			}
			INITIATIVE_INDEX = "[?INITIATIVE_INDEX]"
		}
	}
}

BAR_pen_fight_silver_normal_attack = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				s_in > 0
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 2
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 3
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 4
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 5
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 6
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 7
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 8
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 9
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 10
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 11
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 12
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 13
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 14
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 15
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 16
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 17
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 18
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 19
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 20
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 21
					}
				}
			}
			random_list = {
				90 = {
					subtract_from_variable = {
						v_hp = dmgToDeal
					}
				}
				10 = {
					set_variable = {
						bar_pen_fight_missed = 1
					}
					#you missed
				}
			}
			subtract_from_variable = {
				s_in = 1
			}
			BAR_viira_turn_new = yes
		}
	}
}

BAR_pen_fight_silver_lifesteal_attack = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				s_in > 1
			}
			check_variable = {
				BAR_resources_silver > 49
			}
		}
		random_list = {
			5 = {
				set_temp_variable = {
					dmgToDeal = 5
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 6
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 7
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 8
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 9
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 10
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 11
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 12
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 13
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 14
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 15
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 16
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 17
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 18
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 19
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 20
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 21
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 22
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 23
				}
			}
			5 = {
				set_temp_variable = {
					dmgToDeal = 24
				}
			}
		}
		random_list = {
			90 = {
				subtract_from_variable = {
					v_hp = dmgToDeal
				}
				set_temp_variable = {
					s_hp_temp = s_hp
				}
				add_to_temp_variable = {
					s_hp_temp = dmgToDeal
				}
				if = {
					limit = {
						check_variable = {
							s_hp_max < s_hp_temp
						}
					}
					add_to_variable = {
						s_hp = dmgToDeal
					}
				}
				else = {
					set_variable = {
						s_hp = s_hp_max
					}
				}
			}
			10 = {
				set_variable = {
					bar_pen_fight_missed = 1
				}
				#you missed
			}
		}
		subtract_from_variable = {
			s_in = 2
		}
		subtract_from_variable = {
			BAR_resources_silver = 50
		}
		BAR_viira_turn_new = yes
	}
}

BAR_silver_heal = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				s_in > 1
			}
			check_variable = {
				BAR_resources_silver > 99
			}
		}
		set_variable = {
			BAR_heal_prepare = 1
		}
	}
}

BAR_silver_heal_silver = {
	if = {
		limit = {
			check_variable = {
				BAR_heal_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = {
						healAmount = 24
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 26
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 28
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 30
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 32
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 34
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 36
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 38
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 40
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 42
					}
				}
			}
			set_temp_variable = {
				s_hp_temp = s_hp
			}
			add_to_temp_variable = {
				s_hp_temp = healAmount
			}
			if = {
				limit = {
					check_variable = {
						s_hp_max > s_hp_temp
					}
				}
				add_to_variable = {
					s_hp = healAmount
				}
			}
			else = {
				set_variable = {
					s_hp = s_hp_max
				}
			}
			subtract_from_variable = {
				BAR_resources_silver = 100
			}
			BAR_viira_turn_new = yes
			set_variable = {
				BAR_heal_prepare = 0
			}
		}
	}
}

BAR_silver_heal_asinti = {
	if = {
		limit = {
			check_variable = {
				BAR_heal_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = {
						healAmount = 24
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 26
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 28
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 30
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 32
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 34
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 36
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 38
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 40
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 42
					}
				}
			}
			set_temp_variable = {
				a_hp_temp = a_hp
			}
			add_to_temp_variable = {
				a_hp_temp = healAmount
			}
			if = {
				limit = {
					check_variable = {
						a_hp_max > a_hp_temp
					}
				}
				add_to_variable = {
					a_hp = healAmount
				}
			}
			else = {
				set_variable = {
					a_hp = a_hp_max
				}
			}
			subtract_from_variable = {
				BAR_resources_silver = 100
			}
			BAR_viira_turn_new = yes
			set_variable = {
				BAR_heal_prepare = 0
			}
		}
	}
}

BAR_silver_heal_leopold = {
	if = {
		limit = {
			check_variable = {
				BAR_heal_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = {
						healAmount = 24
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 26
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 28
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 30
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 32
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 34
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 36
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 38
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 40
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 42
					}
				}
			}
			set_temp_variable = {
				l_hp_temp = l_hp
			}
			add_to_temp_variable = {
				l_hp_temp = healAmount
			}
			if = {
				limit = {
					check_variable = {
						l_hp_max > l_hp_temp
					}
				}
				add_to_variable = {
					l_hp = healAmount
				}
			}
			else = {
				set_variable = {
					l_hp = l_hp_max
				}
			}
			subtract_from_variable = {
				BAR_resources_silver = 100
			}
			BAR_viira_turn_new = yes
			set_variable = {
				BAR_heal_prepare = 0
			}
		}
	}
}

BAR_pen_fight_leopold_normal_attack = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				l_in > 0
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 3
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 4
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 5
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 6
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 7
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 8
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 9
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 10
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 11
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 12
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 13
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 14
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 15
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 16
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 17
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 18
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 19
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 20
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 21
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 22
					}
				}
			}
			random_list = {
				90 = {
					subtract_from_variable = {
						v_hp = dmgToDeal
					}
				}
				10 = {
					set_variable = {
						bar_pen_fight_missed = 2
					}
					#you missed
				}
			}
			subtract_from_variable = {
				l_in = 1
			}
			BAR_viira_turn_new = yes
		}
	}
}

BAR_pen_fight_leopold_strong_attack = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				l_in > 2
			}
			check_variable = {
				BAR_resources_leopold > 49
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 11
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 13
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 15
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 16
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 18
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 20
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 22
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 24
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 26
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 28
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 30
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 32
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 34
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 36
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 38
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 40
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 42
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 44
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 46
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 48
					}
				}
			}
			random_list = {
				90 = {
					subtract_from_variable = {
						v_hp = dmgToDeal
					}
				}
				10 = {
					set_variable = {
						bar_pen_fight_missed = 2
					}
					#you missed
				}
			}
			subtract_from_variable = {
				l_in = 3
			}
			subtract_from_variable = {
				BAR_resources_leopold = 50
			}
			BAR_viira_turn_new = yes
		}
	}
}

BAR_pen_fight_leopold_stun = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				l_in > 1
			}
			check_variable = {
				BAR_resources_leopold > 99
			}
		}
		hidden_effect = {
			random_list = {
				40 = {
					set_variable = {
						v_stun = 1
					}
				}
				50 = {
					set_variable = {
						v_stun = 2
					}
				}
				10 = {
					set_variable = {
						v_stun = 3
					}
				}
			}
			subtract_from_variable = {
				l_in = 2
			}
			subtract_from_variable = {
				BAR_resources_leopold = 100
			}
			BAR_viira_turn_new = yes
		}
	}
}

BAR_pen_fight_asinti_normal_attack = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				a_in > 0
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 3
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 4
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 5
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 6
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 7
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 8
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 9
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 10
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 11
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 12
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 13
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 14
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 15
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 16
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 17
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 18
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 19
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 20
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 21
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 22
					}
				}
			}
			random_list = {
				90 = {
					subtract_from_variable = {
						v_hp = dmgToDeal
					}
				}
				10 = {
					set_variable = {
						bar_pen_fight_missed = 3
					}
					#you missed
				}
			}
			subtract_from_variable = {
				a_in = 1
			}
			BAR_viira_turn_new = yes
		}
	}
}

BAR_pen_fight_asinti_heal = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				a_in > 1
			}
			check_variable = {
				BAR_resources_asinti > 49
			}
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = {
						healAmount = 7
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 8
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 9
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 10
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 11
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 12
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 13
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 14
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 16
					}
				}
				10 = {
					set_temp_variable = {
						healAmount = 17
					}
				}
			}
			if = {
				limit = {
					has_country_flag = barrad_silver_star_alive
					has_country_flag = barrad_asinti_alive
					has_country_flag = barrad_leopold_alive
				}
				set_temp_variable = {
					a_hp_t = a_hp
				}
				set_temp_variable = {
					l_hp_t = l_hp
				}
				set_temp_variable = {
					s_hp_t = s_hp
				}
				add_to_temp_variable = {
					a_hp_t = healAmount
				}
				add_to_temp_variable = {
					l_hp_t = healAmount
				}
				add_to_temp_variable = {
					s_hp_t = healAmount
				}
				if = {
					limit = {
						check_variable = {
							a_hp_t > a_hp_max
						}
					}
					set_variable = {
						a_hp = a_hp_max
					}
				}
				else = {
					add_to_variable = {
						a_hp = healAmount
					}
				}
				if = {
					limit = {
						check_variable = {
							l_hp_t > l_hp_max
						}
					}
					set_variable = {
						l_hp = l_hp_max
					}
				}
				else = {
					add_to_variable = {
						l_hp = healAmount
					}
				}
				if = {
					limit = {
						check_variable = {
							s_hp_t > s_hp_max
						}
					}
					set_variable = {
						s_hp = s_hp_max
					}
				}
				else = {
					add_to_variable = {
						s_hp = healAmount
					}
				}
			}
			else_if = {
				limit = {
					has_country_flag = barrad_silver_star_alive
					has_country_flag = barrad_asinti_alive
					NOT = {
						has_country_flag = barrad_leopold_alive
					}
				}
				set_temp_variable = {
					a_hp_t = a_hp
				}
				set_temp_variable = {
					s_hp_t = s_hp
				}
				add_to_temp_variable = {
					a_hp_t = healAmount
				}
				add_to_temp_variable = {
					s_hp_t = healAmount
				}
				if = {
					limit = {
						check_variable = {
							a_hp_t > a_hp_max
						}
					}
					set_variable = {
						a_hp = a_hp_max
					}
				}
				else = {
					add_to_variable = {
						a_hp = healAmount
					}
				}
				if = {
					limit = {
						check_variable = {
							s_hp_t > s_hp_max
						}
					}
					set_variable = {
						s_hp = s_hp_max
					}
				}
				else = {
					add_to_variable = {
						s_hp = healAmount
					}
				}
			}
			else_if = {
				limit = {
					has_country_flag = barrad_silver_star_alive
					NOT = {
						has_country_flag = barrad_asinti_alive
					}
					has_country_flag = barrad_leopold_alive
				}
				set_temp_variable = {
					l_hp_t = l_hp
				}
				set_temp_variable = {
					s_hp_t = s_hp
				}
				add_to_temp_variable = {
					l_hp_t = healAmount
				}
				add_to_temp_variable = {
					s_hp_t = healAmount
				}
				else = {
					add_to_variable = {
						a_hp = healAmount
					}
				}
				if = {
					limit = {
						check_variable = {
							l_hp_t > l_hp_max
						}
					}
					set_variable = {
						l_hp = l_hp_max
					}
				}
				else = {
					add_to_variable = {
						l_hp = healAmount
					}
				}
				if = {
					limit = {
						check_variable = {
							s_hp_t > s_hp_max
						}
					}
					set_variable = {
						s_hp = s_hp_max
					}
				}
				else = {
					add_to_variable = {
						s_hp = healAmount
					}
				}
			}
			else_if = {
				limit = {
					has_country_flag = barrad_silver_star_alive
					NOT = {
						has_country_flag = barrad_asinti_alive
					}
					NOT = {
						has_country_flag = barrad_leopold_alive
					}
				}
				set_temp_variable = {
					s_hp_t = s_hp
				}
				add_to_temp_variable = {
					s_hp_t = healAmount
				}
				if = {
					limit = {
						check_variable = {
							s_hp_t > s_hp_max
						}
					}
					set_variable = {
						s_hp = s_hp_max
					}
				}
				else = {
					add_to_variable = {
						s_hp = healAmount
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_country_flag = barrad_silver_star_alive
					}
					has_country_flag = barrad_asinti_alive
					has_country_flag = barrad_leopold_alive
				}
				set_temp_variable = {
					a_hp_t = a_hp
				}
				set_temp_variable = {
					l_hp_t = l_hp
				}
				add_to_temp_variable = {
					a_hp_t = healAmount
				}
				add_to_temp_variable = {
					l_hp_t = healAmount
				}
				if = {
					limit = {
						check_variable = {
							a_hp_t > a_hp_max
						}
					}
					set_variable = {
						a_hp = a_hp_max
					}
				}
				else = {
					add_to_variable = {
						a_hp = healAmount
					}
				}
				if = {
					limit = {
						check_variable = {
							l_hp_t > l_hp_max
						}
					}
					set_variable = {
						l_hp = l_hp_max
					}
				}
				else = {
					add_to_variable = {
						l_hp = healAmount
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_country_flag = barrad_silver_star_alive
					}
					has_country_flag = barrad_asinti_alive
					NOT = {
						has_country_flag = barrad_leopold_alive
					}
				}
				set_temp_variable = {
					a_hp_t = a_hp
				}
				add_to_temp_variable = {
					a_hp_t = healAmount
				}
				if = {
					limit = {
						check_variable = {
							a_hp_t > a_hp_max
						}
					}
					set_variable = {
						a_hp = a_hp_max
					}
				}
				else = {
					add_to_variable = {
						a_hp = healAmount
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_country_flag = barrad_silver_star_alive
					}
					NOT = {
						has_country_flag = barrad_asinti_alive
					}
					has_country_flag = barrad_leopold_alive
				}
				set_temp_variable = {
					l_hp_t = l_hp
				}
				add_to_temp_variable = {
					l_hp_t = healAmount
				}
				if = {
					limit = {
						check_variable = {
							l_hp_t > l_hp_max
						}
					}
					set_variable = {
						l_hp = l_hp_max
					}
				}
				else = {
					add_to_variable = {
						l_hp = healAmount
					}
				}
			}
			subtract_from_variable = {
				a_in = 2
			}
			subtract_from_variable = {
				BAR_resources_asinti = 100
			}
			BAR_viira_turn_new = yes
		}
	}
}

BAR_pen_fight_asinti_debuf = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	if = {
		limit = {
			check_variable = {
				a_in > 0
			}
			check_variable = {
				BAR_resources_asinti > 99
			}
		}
		hidden_effect = {
			subtract_from_variable = {
				a_in = 1
			}
			subtract_from_variable = {
				BAR_resources_asinti = 100
			}
			set_variable = {
				viira_dmg_debuff = 2
			}
			BAR_viira_turn_new = yes
		}
	}
}

BAR_pen_fight_rest = {
	set_variable = {
		bar_pen_fight_missed = 0
	}
	hidden_effect = {
		if = {
			limit = {
				has_country_flag = barrad_asinti_alive
			}
			if = {
				limit = {
					check_variable = {
						a_in > 8
					}
				}
				set_variable = {
					a_in = 10
				}
			}
			else = {
				add_to_variable = {
					a_in = 2
				}
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_leopold_alive
			}
			if = {
				limit = {
					check_variable = {
						l_in > 8
					}
				}
				set_variable = {
					l_in = 10
				}
			}
			else = {
				add_to_variable = {
					l_in = 2
				}
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
			}
			if = {
				limit = {
					check_variable = {
						s_in > 8
					}
				}
				set_variable = {
					s_in = 10
				}
			}
			else = {
				add_to_variable = {
					s_in = 2
				}
			}
		}
		BAR_viira_turn_new = yes
	}
}

BAR_viira_turn_new = {
	if = {
		limit = {
			check_variable = {
				v_hp > 0
			}
		}
		random_list = {
			35 = {
				#target weakest one
				set_temp_variable = {
					min = 1000
				}
				set_variable = {
					viira_target = 0
				}
				if = {
					limit = {
						check_variable = {
							a_hp > 0
						}
						check_variable = {
							a_hp < min
						}
					}
					set_variable = {
						min = a_hp
					}
					set_variable = {
						viira_target = 1
					}
				}
				if = {
					limit = {
						check_variable = {
							l_hp > 0
						}
						check_variable = {
							l_hp < min
						}
					}
					set_variable = {
						min = l_hp
					}
					set_variable = {
						viira_target = 2
					}
				}
				if = {
					limit = {
						check_variable = {
							s_hp > 0
						}
						check_variable = {
							s_hp < min
						}
					}
					set_variable = {
						min = s_hp
					}
					set_variable = {
						viira_target = 3
					}
				}
			}
			65 = {
				#target random one
				if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						34 = {
							set_variable = {
								viira_target = 1
							}
						}
						33 = {
							set_variable = {
								viira_target = 2
							}
						}
						33 = {
							set_variable = {
								viira_target = 3
							}
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						NOT = {
							has_country_flag = barrad_leopold_alive
						}
					}
					random_list = {
						50 = {
							set_variable = {
								viira_target = 1
							}
						}
						50 = {
							set_variable = {
								viira_target = 3
							}
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = {
							has_country_flag = barrad_asinti_alive
						}
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = {
								viira_target = 2
							}
						}
						50 = {
							set_variable = {
								viira_target = 3
							}
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = {
							has_country_flag = barrad_asinti_alive
						}
						NOT = {
							has_country_flag = barrad_leopold_alive
						}
					}
					set_variable = {
						viira_target = 3
					}
				}
				else_if = {
					limit = {
						NOT = {
							has_country_flag = barrad_silver_star_alive
						}
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = {
								viira_target = 1
							}
						}
						50 = {
							set_variable = {
								viira_target = 2
							}
						}
					}
				}
				else_if = {
					limit = {
						NOT = {
							has_country_flag = barrad_silver_star_alive
						}
						has_country_flag = barrad_asinti_alive
						NOT = {
							has_country_flag = barrad_leopold_alive
						}
					}
					set_variable = {
						viira_target = 1
					}
				}
				else_if = {
					limit = {
						NOT = {
							has_country_flag = barrad_silver_star_alive
						}
						NOT = {
							has_country_flag = barrad_asinti_alive
						}
						has_country_flag = barrad_leopold_alive
					}
					set_variable = {
						viira_target = 2
					}
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					v_stun < 1
				}
			}
			BAR_viira_attack = yes
		}
		else = {
			set_variable = {
				viira_turn_action = 5
			}
			subtract_from_variable = {
				v_stun = 1
			}
		}
		set_variable = {
			viira_dmg_debuff = 1
		}
		if = {
			limit = {
				check_variable = {
					a_hp < 1
				}
			}
			set_variable = {
				bar_pen_fight_asinti_state = 2
			}
			barrad_kill_asinti = yes
		}
		if = {
			limit = {
				check_variable = {
					l_hp < 1
				}
			}
			set_variable = {
				bar_pen_fight_leopold_state = 2
			}
			barrad_kill_leopold = yes
		}
		if = {
			limit = {
				check_variable = {
					s_hp < 1
				}
			}
			set_variable = {
				bar_pen_fight_silver_state = 2
			}
			barrad_kill_silver = yes
		}
		bar_pen_fight_gui_reload = yes
		BAR_viira_round_end_new = yes
	}
	else = {
		barrad_kill_viira = yes
		set_variable = {
			bar_pen_fight_viira_state = 2
		}
		country_event = {
			id = barrad_viira_fight.7
		}
		#we won!
	}
}

BAR_viira_round_end_new = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_silver_star_alive
			}
		}
		log = "[GetDateText]: [Root.GetName]: viir fight next round"
	}
	else = {
		country_event = {
			id = barrad_viira_fight.6
		}
		#we lost...
	}
}

bar_pen_fight_close_window = {
	#clears variables used in fight
	clear_variable = BAR_fight_pentarchy_action
	clear_variable = a_hp
	clear_variable = a_hp_max
	clear_variable = a_in
	clear_variable = l_hp
	clear_variable = l_hp_max
	clear_variable = l_in
	clear_variable = s_hp
	clear_variable = s_hp_max
	clear_variable = s_in
	clear_variable = v_hp
	clear_variable = v_hp_max
	clear_variable = v_in
	clear_variable = bar_pen_fight_silver_state
	clear_variable = bar_pen_fight_leopold_state
	clear_variable = bar_pen_fight_asinti_state
	clear_variable = heal_target
	clear_variable = character_attacking
	clear_variable = viira_dmg_debuff
	clear_variable = v_stun
	clear_variable = bar_pentarchy_fight_show
	clear_variable = bar_viira_fight_show
	#looping thought hp and clearing vars
	for_loop_effect = {
		start = 1
		end = v_max_hp_index
		value = hp_index
		set_temp_variable = {
			hp_mult_value = hp_index
		}
		multiply_temp_variable = {
			hp_mult_value = 10
		}
		meta_effect = {
			text = {
				clear_variable = a_hp_d_[HP_VALUE]
				clear_variable = s_hp_d_[HP_VALUE]
				clear_variable = l_hp_d_[HP_VALUE]
				clear_variable = v_hp_d_[HP_VALUE]
			}
			HP_VALUE = "[?hp_mult_value]"
		}
	}
}

bar_viira_fight_normal_attack = {
	if = {
		limit = {
			check_variable = {
				v_stun < 1
			}
			check_variable = {
				v_in > 0
			}
		}
		clear_variable = bar_viira_fight_strong_attack_prepare
		set_variable = {
			bar_viira_fight_normal_attack_prepare = 1
		}
	}
}

bar_viira_fight_normal_attack_asinti = {
	if = {
		limit = {
			check_variable = {
				bar_viira_fight_normal_attack_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 5
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 6
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 7
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 8
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 9
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 10
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 11
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 12
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 13
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 14
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 15
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 16
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 17
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 18
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 19
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 20
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 21
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 22
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 23
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 24
					}
				}
			}
			divide_temp_variable = {
				dmgToDeal = viira_dmg_debuff
			}
			subtract_from_variable = {
				v_in = 1
			}
			subtract_from_variable = {
				a_hp = dmgToDeal
			}
			if = {
				limit = {
					check_variable = {
						a_hp < 0
					}
				}
				barrad_kill_asinti = yes
			}
			BAR_pentarchy_turn_new = yes
		}
		clear_variable = bar_viira_fight_normal_attack_prepare
	}
}

bar_viira_fight_normal_attack_leopold = {
	if = {
		limit = {
			check_variable = {
				bar_viira_fight_normal_attack_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 5
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 6
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 7
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 8
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 9
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 10
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 11
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 12
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 13
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 14
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 15
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 16
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 17
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 18
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 19
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 20
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 21
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 22
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 23
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 24
					}
				}
			}
			divide_temp_variable = {
				dmgToDeal = viira_dmg_debuff
			}
			subtract_from_variable = {
				v_in = 1
			}
			subtract_from_variable = {
				l_hp = dmgToDeal
			}
			if = {
				limit = {
					check_variable = {
						l_hp < 0
					}
				}
				barrad_kill_leopold = yes
			}
			BAR_pentarchy_turn_new = yes
		}
		clear_variable = bar_viira_fight_normal_attack_prepare
	}
}

bar_viira_fight_normal_attack_silver = {
	if = {
		limit = {
			check_variable = {
				bar_viira_fight_normal_attack_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 5
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 6
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 7
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 8
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 9
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 10
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 11
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 12
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 13
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 14
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 15
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 16
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 17
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 18
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 19
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 20
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 21
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 22
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 23
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 24
					}
				}
			}
			divide_temp_variable = {
				dmgToDeal = viira_dmg_debuff
			}
			subtract_from_variable = {
				v_in = 1
			}
			subtract_from_variable = {
				s_hp = dmgToDeal
			}
			if = {
				limit = {
					check_variable = {
						s_hp < 0
					}
				}
				barrad_kill_silver = yes
			}
			BAR_pentarchy_turn_new = yes
		}
		clear_variable = bar_viira_fight_normal_attack_prepare
	}
}

bar_viira_fight_strong_attack = {
	if = {
		limit = {
			check_variable = {
				v_stun < 1
			}
			check_variable = {
				v_in > 2
			}
			check_variable = {
				BAR_resources_viira > 99
			}
		}
		clear_variable = bar_viira_fight_normal_attack_prepare
		set_variable = {
			bar_viira_fight_strong_attack_prepare = 1
		}
	}
}

bar_viira_fight_strong_attack_asinti = {
	if = {
		limit = {
			check_variable = {
				bar_viira_fight_strong_attack_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 24
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 26
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 28
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 30
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 32
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 34
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 36
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 38
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 40
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 42
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 54
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 56
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 58
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 69
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 62
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 64
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 66
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 68
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 70
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 72
					}
				}
			}
			divide_temp_variable = {
				dmgToDeal = viira_dmg_debuff
			}
			subtract_from_variable = {
				v_in = 3
			}
			subtract_from_variable = {
				a_hp = dmgToDeal
			}
			if = {
				limit = {
					check_variable = {
						a_hp < 0
					}
				}
				barrad_kill_asinti = yes
			}
			subtract_from_variable = {
				BAR_resources_viira = 100
			}
			BAR_pentarchy_turn_new = yes
		}
		clear_variable = bar_viira_fight_strong_attack_prepare
	}
}

bar_viira_fight_strong_attack_silver = {
	if = {
		limit = {
			check_variable = {
				bar_viira_fight_strong_attack_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 24
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 26
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 28
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 30
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 32
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 34
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 36
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 38
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 40
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 42
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 54
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 56
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 58
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 69
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 62
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 64
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 66
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 68
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 70
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 72
					}
				}
			}
			divide_temp_variable = {
				dmgToDeal = viira_dmg_debuff
			}
			subtract_from_variable = {
				v_in = 3
			}
			subtract_from_variable = {
				s_hp = dmgToDeal
			}
			if = {
				limit = {
					check_variable = {
						s_hp < 0
					}
				}
				barrad_kill_silver = yes
			}
			subtract_from_variable = {
				BAR_resources_viira = 100
			}
			BAR_pentarchy_turn_new = yes
		}
		clear_variable = bar_viira_fight_strong_attack_prepare
	}
}

bar_viira_fight_strong_attack_leopold = {
	if = {
		limit = {
			check_variable = {
				bar_viira_fight_strong_attack_prepare = 1
			}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = {
						dmgToDeal = 24
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 26
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 28
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 30
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 32
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 34
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 36
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 38
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 40
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 42
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 54
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 56
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 58
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 69
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 62
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 64
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 66
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 68
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 70
					}
				}
				5 = {
					set_temp_variable = {
						dmgToDeal = 72
					}
				}
			}
			divide_temp_variable = {
				dmgToDeal = viira_dmg_debuff
			}
			subtract_from_variable = {
				v_in = 3
			}
			subtract_from_variable = {
				l_hp = dmgToDeal
			}
			if = {
				limit = {
					check_variable = {
						l_hp < 0
					}
				}
				barrad_kill_leopold = yes
			}
			subtract_from_variable = {
				BAR_resources_viira = 100
			}
			BAR_pentarchy_turn_new = yes
		}
		clear_variable = bar_viira_fight_strong_attack_prepare
	}
}

bar_viira_fight_heal = {
	if = {
		limit = {
			check_variable = {
				v_stun < 1
			}
			check_variable = {
				v_in > 0
			}
			check_variable = {
				BAR_resources_viira > 199
			}
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = {
						healVal = 12
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 14
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 16
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 18
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 20
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 22
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 24
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 26
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 28
					}
				}
				10 = {
					set_temp_variable = {
						healVal = 30
					}
				}
			}
			set_temp_variable = {
				curHp = v_hp
			}
			add_to_temp_variable = {
				curHp = healVal
			}
			if = {
				limit = {
					check_variable = {
						curHp > v_hp_max
					}
				}
				set_variable = {
					v_hp = v_hp_max
				}
			}
			else = {
				add_to_variable = {
					v_hp = healVal
				}
			}
			subtract_from_variable = {
				v_in = 1
			}
			subtract_from_variable = {
				BAR_resources_viira = 200
			}
			BAR_pentarchy_turn_new = yes
		}
	}
}

bar_viira_fight_rest = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = {
					v_in < 16
				}
			}
			add_to_variable = {
				v_in = 5
			}
		}
		else = {
			set_variable = {
				v_in = 20
			}
		}
		BAR_pentarchy_turn_new = yes
	}
}

BAR_pentarchy_turn_new = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				34 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = {
						character_attacking = 1
					}
				}
				33 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = {
						character_attacking = 2
					}
				}
				33 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = {
						character_attacking = 3
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				NOT = {
					has_country_flag = barrad_leopold_alive
				}
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = {
						character_attacking = 1
					}
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = {
						character_attacking = 3
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = {
					has_country_flag = barrad_asinti_alive
				}
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = {
						character_attacking = 2
					}
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = {
						character_attacking = 3
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = {
					has_country_flag = barrad_asinti_alive
				}
				NOT = {
					has_country_flag = barrad_leopold_alive
				}
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
			set_variable = {
				character_attacking = 3
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_country_flag = barrad_silver_star_alive
				}
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = {
						character_attacking = 1
					}
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = {
						character_attacking = 2
					}
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_country_flag = barrad_silver_star_alive
				}
				has_country_flag = barrad_asinti_alive
				NOT = {
					has_country_flag = barrad_leopold_alive
				}
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
			set_variable = {
				character_attacking = 1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_country_flag = barrad_silver_star_alive
				}
				NOT = {
					has_country_flag = barrad_asinti_alive
				}
				has_country_flag = barrad_leopold_alive
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
			set_variable = {
				character_attacking = 2
			}
		}
		BAR_pentarchy_attack = yes
		if = {
			limit = {
				check_variable = {
					v_hp > 0
				}
			}
			add_to_variable = {
				bar_viira_fight_show = 1
			}
		}
		else = {
			#gameover
			set_variable = {
				bar_pen_fight_viira_state = 2
			}
			country_event = {
				id = barrad_viira_fight.9
			}
		}
	}
	else = {
		#viira won
		country_event = {
			id = barrad_viira_fight.10
		}
	}
	if = {
		limit = {
			check_variable = {
				v_stun > 0
			}
		}
		subtract_from_variable = {
			v_stun = 1
		}
		BAR_pentarchy_turn_new = yes
	}
	bar_viira_fight_gui_reload = yes
}

BAR_titan_turn = {
	set_temp_variable = {
		dmgMult = 1
	}
	if = {
		limit = {
			check_variable = {
				titanHP < 70
			}
		}
		random_list = {
			50 = {
				multiply_temp_variable = {
					dmgMult = 2
				}
			}
			50 = {
			}
		}
	}
	divide_temp_variable = {
		dmgMult = onDef
	}
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 3
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 4
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 5
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 6
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 7
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 8
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 9
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 10
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 11
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 12
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 13
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 14
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 15
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 16
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 17
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 18
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 19
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 20
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 21
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 22
			}
		}
	}
	multiply_temp_variable = {
		dmgToDeal = dmgMult
	}
	if = {
		#if viira is around
		limit = {
			has_country_flag = BAR_viira_fights_leo
		}
		random_list = {
			75 = {
				set_variable = {
					lastDmgTaken = dmgToDeal
				}
				subtract_from_variable = {
					leoHP = dmgToDeal
				}
			}
			25 = {
				set_variable = {
					lastDmgDealth = 0
				}
			}
		}
	}
	else = {
		random_list = {
			90 = {
				set_variable = {
					lastDmgTaken = dmgToDeal
				}
				subtract_from_variable = {
					leoHP = dmgToDeal
				}
			}
			10 = {
				set_variable = {
					lastDmgDealth = 0
				}
			}
		}
	}
	set_variable = {
		onDef = 1
	}
	if = {
		limit = {
			has_country_flag = BAR_viira_fights_leo
		}
		if = {
			limit = {
				check_variable = {
					titanHP > 0
				}
				check_variable = {
					leoHP > 0
				}
			}
			country_event = {
				id = bar_titan_fight.21
			}
		}
		else_if = {
			limit = {
				check_variable = {
					titanHP > 0
				}
				check_variable = {
					leoHP < 1
				}
			}
			country_event = {
				id = bar_titan_fight.51
			}
		}
		else_if = {
			limit = {
				check_variable = {
					leoHP > 0
				}
				check_variable = {
					titanHP < 1
				}
			}
			country_event = {
				id = bar_titan_fight.53
			}
		}
		else = {
			country_event = {
				id = bar_titan_fight.52
			}
		}
	}
	else = {
		if = {
			limit = {
				check_variable = {
					titanHP > 0
				}
				check_variable = {
					leoHP > 0
				}
			}
			country_event = {
				id = bar_titan_fight.21
			}
		}
		else_if = {
			limit = {
				check_variable = {
					titanHP > 0
				}
				check_variable = {
					leoHP < 1
				}
			}
			country_event = {
				id = bar_titan_fight.41
			}
		}
		else_if = {
			limit = {
				check_variable = {
					leoHP > 0
				}
				check_variable = {
					titanHP < 1
				}
			}
			country_event = {
				id = bar_titan_fight.43
			}
		}
		else = {
			country_event = {
				id = bar_titan_fight.42
			}
		}
	}
}

BAR_titan_turn2 = {
	set_temp_variable = {
		dmgMult = 1
	}
	if = {
		limit = {
			check_variable = {
				titanHP < 70
			}
		}
		random_list = {
			50 = {
				multiply_temp_variable = {
					dmgMult = 2
				}
			}
			50 = {
			}
		}
	}
	divide_temp_variable = {
		dmgMult = onDef
	}
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 3
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 4
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 5
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 6
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 7
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 8
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 9
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 10
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 11
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 12
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 13
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 14
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 15
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 16
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 17
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 18
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 19
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 20
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 21
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 22
			}
		}
	}
	multiply_temp_variable = {
		dmgToDeal = dmgMult
	}
	if = {
		#if viira is around
		limit = {
			has_country_flag = BAR_viira_fights_leo
		}
		random_list = {
			75 = {
				set_variable = {
					lastDmgTaken = dmgToDeal
				}
				subtract_from_variable = {
					leoHP = dmgToDeal
				}
			}
			25 = {
				set_variable = {
					lastDmgDealth = 0
				}
			}
		}
	}
	else = {
		random_list = {
			90 = {
				set_variable = {
					lastDmgTaken = dmgToDeal
				}
				subtract_from_variable = {
					leoHP = dmgToDeal
				}
			}
			10 = {
				set_variable = {
					lastDmgDealth = 0
				}
			}
		}
	}
	set_variable = {
		onDef = 1
	}
	if = {
		limit = {
			has_country_flag = BAR_viira_fights_leo
		}
		if = {
			limit = {
				check_variable = {
					titanHP > 0
				}
				check_variable = {
					leoHP > 0
				}
			}
			country_event = {
				id = bar_titan_fight.2
			}
		}
		else_if = {
			limit = {
				check_variable = {
					titanHP > 0
				}
				check_variable = {
					leoHP < 1
				}
			}
			country_event = {
				id = bar_titan_fight.51
			}
		}
		else_if = {
			limit = {
				check_variable = {
					leoHP > 0
				}
				check_variable = {
					titanHP < 1
				}
			}
			country_event = {
				id = bar_titan_fight.53
			}
		}
		else = {
			country_event = {
				id = bar_titan_fight.52
			}
		}
	}
	else = {
		if = {
			limit = {
				check_variable = {
					titanHP > 0
				}
				check_variable = {
					leoHP > 0
				}
			}
			country_event = {
				id = bar_titan_fight.2
			}
		}
		else_if = {
			limit = {
				check_variable = {
					titanHP > 0
				}
				check_variable = {
					leoHP < 1
				}
			}
			country_event = {
				id = bar_titan_fight.41
			}
		}
		else_if = {
			limit = {
				check_variable = {
					leoHP > 0
				}
				check_variable = {
					titanHP < 1
				}
			}
			country_event = {
				id = bar_titan_fight.43
			}
		}
		else = {
			country_event = {
				id = bar_titan_fight.42
			}
		}
	}
}

BAR_viira_round_end = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_silver_star_alive
			}
		}
		country_event = {
			id = barrad_viira_fight.5
		}
	}
	else = {
		country_event = {
			id = barrad_viira_fight.6
		}
		#we lost...
	}
}

BAR_viira_turn = {
	if = {
		limit = {
			check_variable = {
				v_hp > 0
			}
		}
		random_list = {
			50 = {
				#target weakest one
				set_temp_variable = {
					min = 1000
				}
				set_variable = {
					viira_target = 0
				}
				if = {
					limit = {
						check_variable = {
							a_hp > 0
						}
						check_variable = {
							a_hp < min
						}
					}
					set_variable = {
						min = a_hp
					}
					set_variable = {
						viira_target = 1
					}
				}
				if = {
					limit = {
						check_variable = {
							l_hp > 0
						}
						check_variable = {
							l_hp < min
						}
					}
					set_variable = {
						min = l_hp
					}
					set_variable = {
						viira_target = 2
					}
				}
				if = {
					limit = {
						check_variable = {
							s_hp > 0
						}
						check_variable = {
							s_hp < min
						}
					}
					set_variable = {
						min = s_hp
					}
					set_variable = {
						viira_target = 3
					}
				}
			}
			50 = {
				#target random one
				if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						34 = {
							set_variable = {
								viira_target = 1
							}
						}
						33 = {
							set_variable = {
								viira_target = 2
							}
						}
						33 = {
							set_variable = {
								viira_target = 3
							}
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						NOT = {
							has_country_flag = barrad_leopold_alive
						}
					}
					random_list = {
						50 = {
							set_variable = {
								viira_target = 1
							}
						}
						50 = {
							set_variable = {
								viira_target = 3
							}
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = {
							has_country_flag = barrad_asinti_alive
						}
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = {
								viira_target = 2
							}
						}
						50 = {
							set_variable = {
								viira_target = 3
							}
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = {
							has_country_flag = barrad_asinti_alive
						}
						NOT = {
							has_country_flag = barrad_leopold_alive
						}
					}
					set_variable = {
						viira_target = 3
					}
				}
				else_if = {
					limit = {
						NOT = {
							has_country_flag = barrad_silver_star_alive
						}
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = {
								viira_target = 1
							}
						}
						50 = {
							set_variable = {
								viira_target = 2
							}
						}
					}
				}
				else_if = {
					limit = {
						NOT = {
							has_country_flag = barrad_silver_star_alive
						}
						has_country_flag = barrad_asinti_alive
						NOT = {
							has_country_flag = barrad_leopold_alive
						}
					}
					set_variable = {
						viira_target = 1
					}
				}
				else_if = {
					limit = {
						NOT = {
							has_country_flag = barrad_silver_star_alive
						}
						NOT = {
							has_country_flag = barrad_asinti_alive
						}
						has_country_flag = barrad_leopold_alive
					}
					set_variable = {
						viira_target = 2
					}
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					v_stun < 1
				}
			}
			BAR_viira_attack = yes
		}
		else = {
			set_variable = {
				viira_turn_action = 5
			}
			subtract_from_variable = {
				v_stun = 1
			}
		}
		set_variable = {
			viira_dmg_debuff = 1
		}
		if = {
			limit = {
				check_variable = {
					a_hp < 1
				}
			}
			barrad_kill_asinti = yes
		}
		if = {
			limit = {
				check_variable = {
					l_hp < 1
				}
			}
			barrad_kill_leopold = yes
		}
		if = {
			limit = {
				check_variable = {
					s_hp < 1
				}
			}
			barrad_kill_silver = yes
		}
		bar_pen_fight_gui_reload = yes
		BAR_viira_round_end = yes
	}
	else = {
		clr_country_flag = barrad_viira_alive
		country_event = {
			id = barrad_viira_fight.7
		}
		#we won!
	}
}

BAR_viira_attack = {
	set_temp_variable = {
		v_hp_half = v_hp
	}
	set_temp_variable = {
		v_hp_qua = v_hp
	}
	divide_temp_variable = {
		v_hp_half = 2
	}
	divide_temp_variable = {
		v_hp_qua = 4
	}
	if = {
		limit = {
			check_variable = {
				v_in > 10
			}
		}
		if = {
			limit = {
				check_variable = {
					var = v_hp
					value = v_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				70 = {
					BAR_viira_strong_attack = yes
					set_variable = {
						viira_turn_action = 2
					}
				}
				30 = {
					BAR_viira_normal_attack = yes
					set_variable = {
						viira_turn_action = 1
					}
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					v_hp < v_hp_qua
				}
			}
			random_list = {
				50 = {
					BAR_viira_heal = yes
					set_variable = {
						viira_turn_action = 3
					}
				}
				50 = {
					BAR_viira_strong_attack = yes
					set_variable = {
						viira_turn_action = 2
					}
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					v_hp < v_hp_half
				}
			}
			random_list = {
				30 = {
					BAR_viira_heal = yes
					set_variable = {
						viira_turn_action = 3
					}
				}
				70 = {
					BAR_viira_strong_attack = yes
					set_variable = {
						viira_turn_action = 2
					}
				}
			}
		}
	}
	else = {
		if = {
			#rest
			limit = {
				check_variable = {
					v_in = 0
				}
			}
			BAR_viira_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = v_hp
						value = v_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = {
							v_in > 2
						}
					}
					random_list = {
						60 = {
							BAR_viira_rest = yes
							set_variable = {
								viira_turn_action = 4
							}
						}
						20 = {
							BAR_viira_normal_attack = yes
							set_variable = {
								viira_turn_action = 1
							}
						}
						20 = {
							BAR_viira_strong_attack = yes
							set_variable = {
								viira_turn_action = 2
							}
						}
					}
				}
				else = {
					random_list = {
						60 = {
							BAR_viira_rest = yes
							set_variable = {
								viira_turn_action = 4
							}
						}
						40 = {
							BAR_viira_normal_attack = yes
							set_variable = {
								viira_turn_action = 1
							}
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						v_hp < v_hp_qua
					}
				}
				if = {
					limit = {
						check_variable = {
							v_in > 2
						}
					}
					random_list = {
						50 = {
							BAR_viira_heal = yes
							set_variable = {
								viira_turn_action = 3
							}
						}
						50 = {
							BAR_viira_strong_attack = yes
							set_variable = {
								viira_turn_action = 2
							}
						}
					}
				}
				else = {
					random_list = {
						50 = {
							BAR_viira_heal = yes
							set_variable = {
								viira_turn_action = 3
							}
						}
						50 = {
							BAR_viira_normal_attack = yes
							set_variable = {
								viira_turn_action = 1
							}
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						v_hp < v_hp_half
					}
				}
				if = {
					limit = {
						check_variable = {
							v_in > 2
						}
					}
					random_list = {
						30 = {
							BAR_viira_heal = yes
							set_variable = {
								viira_turn_action = 3
							}
						}
						20 = {
							BAR_viira_normal_attack = yes
							set_variable = {
								viira_turn_action = 1
							}
						}
						20 = {
							BAR_viira_strong_attack = yes
							set_variable = {
								viira_turn_action = 2
							}
						}
						30 = {
							BAR_viira_rest = yes
							set_variable = {
								viira_turn_action = 4
							}
						}
					}
				}
				else = {
					random_list = {
						30 = {
							BAR_viira_heal = yes
							set_variable = {
								viira_turn_action = 3
							}
						}
						40 = {
							BAR_viira_strong_attack = yes
							set_variable = {
								viira_turn_action = 2
							}
						}
						30 = {
							BAR_viira_rest = yes
							set_variable = {
								viira_turn_action = 4
							}
						}
					}
				}
			}
		}
	}
}

BAR_viira_normal_attack = {
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 5
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 6
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 7
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 8
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 9
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 10
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 11
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 12
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 13
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 14
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 15
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 16
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 17
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 18
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 19
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 20
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 21
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 22
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 23
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 24
			}
		}
	}
	divide_temp_variable = {
		dmgToDeal = viira_dmg_debuff
	}
	if = {
		limit = {
			check_variable = {
				viira_target = 1
			}
		}
		subtract_from_variable = {
			a_hp = dmgToDeal
		}
	}
	if = {
		limit = {
			check_variable = {
				viira_target = 2
			}
		}
		subtract_from_variable = {
			l_hp = dmgToDeal
		}
	}
	if = {
		limit = {
			check_variable = {
				viira_target = 3
			}
		}
		subtract_from_variable = {
			s_hp = dmgToDeal
		}
	}
	if = {
		limit = {
			check_variable = {
				a_hp < 0
			}
		}
		barrad_kill_asinti = yes
	}
	if = {
		limit = {
			check_variable = {
				l_hp < 0
			}
		}
		barrad_kill_leopold = yes
	}
	if = {
		limit = {
			check_variable = {
				s_hp < 0
			}
		}
		barrad_kill_silver = yes
	}
	subtract_from_variable = {
		v_in = 1
	}
}

BAR_viira_strong_attack = {
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 24
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 26
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 28
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 30
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 32
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 34
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 36
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 38
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 40
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 42
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 54
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 56
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 58
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 69
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 62
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 64
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 66
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 68
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 70
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 72
			}
		}
	}
	divide_temp_variable = {
		dmgToDeal = viira_dmg_debuff
	}
	if = {
		limit = {
			check_variable = {
				viira_target = 1
			}
		}
		subtract_from_variable = {
			a_hp = dmgToDeal
		}
	}
	if = {
		limit = {
			check_variable = {
				viira_target = 2
			}
		}
		subtract_from_variable = {
			l_hp = dmgToDeal
		}
	}
	if = {
		limit = {
			check_variable = {
				viira_target = 3
			}
		}
		subtract_from_variable = {
			s_hp = dmgToDeal
		}
	}
	if = {
		limit = {
			check_variable = {
				a_hp < 0
			}
		}
		barrad_kill_asinti = yes
	}
	if = {
		limit = {
			check_variable = {
				l_hp < 0
			}
		}
		barrad_kill_leopold = yes
	}
	if = {
		limit = {
			check_variable = {
				s_hp < 0
			}
		}
		barrad_kill_silver = yes
	}
	subtract_from_variable = {
		v_in = 3
	}
}

BAR_viira_rest = {
	if = {
		limit = {
			check_variable = {
				v_in < 16
			}
		}
		add_to_variable = {
			v_in = 5
		}
	}
	else = {
		set_variable = {
			v_in = 20
		}
	}
}

BAR_viira_heal = {
	random_list = {
		10 = {
			set_temp_variable = {
				healVal = 32
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 34
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 36
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 38
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 40
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 42
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 44
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 46
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 48
			}
		}
		10 = {
			set_temp_variable = {
				healVal = 50
			}
		}
	}
	set_temp_variable = {
		curHp = v_hp
	}
	add_to_temp_variable = {
		curHp = healVal
	}
	if = {
		limit = {
			check_variable = {
				curHp > v_hp_max
			}
		}
		set_variable = {
			v_hp = v_hp_max
		}
	}
	else = {
		add_to_variable = {
			v_hp = healVal
		}
	}
	subtract_from_variable = {
		v_in = 1
	}
}

BAR_pentarchy_turn = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				34 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = {
						character_attacking = 1
					}
				}
				33 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = {
						character_attacking = 2
					}
				}
				33 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = {
						character_attacking = 3
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				NOT = {
					has_country_flag = barrad_leopold_alive
				}
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = {
						character_attacking = 1
					}
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = {
						character_attacking = 3
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = {
					has_country_flag = barrad_asinti_alive
				}
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = {
						character_attacking = 2
					}
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = {
						character_attacking = 3
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = {
					has_country_flag = barrad_asinti_alive
				}
				NOT = {
					has_country_flag = barrad_leopold_alive
				}
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
			set_variable = {
				character_attacking = 3
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_country_flag = barrad_silver_star_alive
				}
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = {
						character_attacking = 1
					}
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = {
						character_attacking = 2
					}
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_country_flag = barrad_silver_star_alive
				}
				has_country_flag = barrad_asinti_alive
				NOT = {
					has_country_flag = barrad_leopold_alive
				}
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
			set_variable = {
				character_attacking = 1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_country_flag = barrad_silver_star_alive
				}
				NOT = {
					has_country_flag = barrad_asinti_alive
				}
				has_country_flag = barrad_leopold_alive
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
			set_variable = {
				character_attacking = 2
			}
		}
		BAR_pentarchy_attack = yes
		if = {
			limit = {
				check_variable = {
					v_hp > 0
				}
			}
			country_event = {
				id = barrad_viira_fight.8
			}
		}
		else = {
			#gameover
			country_event = {
				id = barrad_viira_fight.9
			}
		}
	}
	else = {
		#viira won
		country_event = {
			id = barrad_viira_fight.10
		}
	}
}

BAR_pentarchy_attack = {
	if = {
		#asinti
		limit = {
			check_variable = {
				character_attacking = 1
			}
		}
		BAR_asinti_attack = yes
	}
	if = {
		#leopold
		limit = {
			check_variable = {
				character_attacking = 2
			}
		}
		BAR_leopold_attack = yes
	}
	if = {
		#silver
		limit = {
			check_variable = {
				character_attacking = 3
			}
		}
		BAR_silver_attack = yes
	}
}

BAR_asinti_attack = {
	set_temp_variable = {
		a_hp_half = a_hp
	}
	set_temp_variable = {
		a_hp_qua = a_hp
	}
	divide_temp_variable = {
		a_hp_half = 2
	}
	divide_temp_variable = {
		a_hp_qua = 4
	}
	if = {
		limit = {
			check_variable = {
				a_in > 5
			}
		}
		if = {
			limit = {
				check_variable = {
					var = a_hp
					value = a_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				70 = {
					BAR_asinti_normal_attack = yes
				}
				30 = {
					BAR_asinti_debuff = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					a_hp < a_hp_qua
				}
			}
			random_list = {
				40 = {
					BAR_asinti_normal_attack = yes
				}
				20 = {
					BAR_asinti_debuff = yes
				}
				40 = {
					BAR_asinti_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					a_hp < a_hp_half
				}
			}
			random_list = {
				50 = {
					BAR_asinti_normal_attack = yes
				}
				30 = {
					BAR_asinti_debuff = yes
				}
				20 = {
					BAR_asinti_heal = yes
				}
			}
		}
	}
	else = {
		if = {
			#rest
			limit = {
				check_variable = {
					a_in = 0
				}
			}
			BAR_pentarchy_rest = yes
			set_variable = {
				BAR_fight_pentarchy_action = 4
			}
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = a_hp
						value = a_hp_half
						compare = greater_than_or_equals
					}
				}
				random_list = {
					60 = {
						BAR_asinti_normal_attack = yes
					}
					40 = {
						BAR_pentarchy_rest = yes
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						a_hp < a_hp_qua
					}
				}
				if = {
					limit = {
						check_variable = {
							a_in > 1
						}
					}
					random_list = {
						20 = {
							BAR_asinti_normal_attack = yes
						}
						40 = {
							BAR_asinti_heal = yes
						}
						40 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
				else = {
					random_list = {
						70 = {
							BAR_asinti_normal_attack = yes
						}
						30 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						a_hp < a_hp_half
					}
				}
				if = {
					limit = {
						check_variable = {
							a_in > 1
						}
					}
					random_list = {
						40 = {
							BAR_asinti_normal_attack = yes
						}
						20 = {
							BAR_asinti_heal = yes
						}
						40 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
				else = {
					60 = {
						BAR_asinti_normal_attack = yes
					}
					40 = {
						BAR_pentarchy_rest = yes
					}
				}
			}
		}
	}
}

BAR_asinti_normal_attack = {
	set_variable = {
		BAR_fight_pentarchy_action = 1
	}
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 3
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 4
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 5
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 6
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 7
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 8
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 9
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 10
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 11
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 12
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 13
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 14
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 15
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 16
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 17
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 18
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 19
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 20
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 21
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 22
			}
		}
	}
	random_list = {
		90 = {
			subtract_from_variable = {
				v_hp = dmgToDeal
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = {
		a_in = 1
	}
}

BAR_asinti_debuff = {
	set_variable = {
		BAR_fight_pentarchy_action = 2
	}
	subtract_from_variable = {
		a_in = 1
	}
	set_variable = {
		viira_dmg_debuff = 2
	}
}

BAR_asinti_heal = {
	set_variable = {
		BAR_fight_pentarchy_action = 3
	}
	random_list = {
		10 = {
			set_temp_variable = {
				healAmount = 7
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 8
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 9
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 10
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 11
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 12
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 13
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 14
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 16
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 17
			}
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			has_country_flag = barrad_asinti_alive
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = {
			a_hp_t = a_hp_max
		}
		set_temp_variable = {
			l_hp_t = l_hp_max
		}
		set_temp_variable = {
			s_hp_t = s_hp_max
		}
		add_to_temp_variable = {
			a_hp_t = healAmount
		}
		add_to_temp_variable = {
			l_hp_t = healAmount
		}
		add_to_temp_variable = {
			s_hp_t = healAmount
		}
		if = {
			limit = {
				check_variable = {
					a_hp_t > a_hp_max
				}
			}
			set_variable = {
				a_hp = a_hp_max
			}
		}
		else = {
			add_to_variable = {
				a_hp = healAmount
			}
		}
		if = {
			limit = {
				check_variable = {
					l_hp_t > l_hp_max
				}
			}
			set_variable = {
				l_hp = l_hp_max
			}
		}
		else = {
			add_to_variable = {
				l_hp = healAmount
			}
		}
		if = {
			limit = {
				check_variable = {
					s_hp_t > s_hp_max
				}
			}
			set_variable = {
				s_hp = s_hp_max
			}
		}
		else = {
			add_to_variable = {
				s_hp = healAmount
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			has_country_flag = barrad_asinti_alive
			NOT = {
				has_country_flag = barrad_leopold_alive
			}
		}
		set_temp_variable = {
			a_hp_t = a_hp_max
		}
		set_temp_variable = {
			s_hp_t = s_hp_max
		}
		add_to_temp_variable = {
			a_hp_t = healAmount
		}
		add_to_temp_variable = {
			s_hp_t = healAmount
		}
		if = {
			limit = {
				check_variable = {
					a_hp_t > a_hp_max
				}
			}
			set_variable = {
				a_hp = a_hp_max
			}
		}
		else = {
			add_to_variable = {
				a_hp = healAmount
			}
		}
		if = {
			limit = {
				check_variable = {
					s_hp_t > s_hp_max
				}
			}
			set_variable = {
				s_hp = s_hp_max
			}
		}
		else = {
			add_to_variable = {
				s_hp = healAmount
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			NOT = {
				has_country_flag = barrad_asinti_alive
			}
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = {
			l_hp_t = l_hp_max
		}
		set_temp_variable = {
			s_hp_t = s_hp_max
		}
		add_to_temp_variable = {
			l_hp_t = healAmount
		}
		add_to_temp_variable = {
			s_hp_t = healAmount
		}
		else = {
			add_to_variable = {
				a_hp = healAmount
			}
		}
		if = {
			limit = {
				check_variable = {
					l_hp_t > l_hp_max
				}
			}
			set_variable = {
				l_hp = l_hp_max
			}
		}
		else = {
			add_to_variable = {
				l_hp = healAmount
			}
		}
		if = {
			limit = {
				check_variable = {
					s_hp_t > s_hp_max
				}
			}
			set_variable = {
				s_hp = s_hp_max
			}
		}
		else = {
			add_to_variable = {
				s_hp = healAmount
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			NOT = {
				has_country_flag = barrad_asinti_alive
			}
			NOT = {
				has_country_flag = barrad_leopold_alive
			}
		}
		set_temp_variable = {
			s_hp_t = s_hp_max
		}
		add_to_temp_variable = {
			s_hp_t = healAmount
		}
		if = {
			limit = {
				check_variable = {
					s_hp_t > s_hp_max
				}
			}
			set_variable = {
				s_hp = s_hp_max
			}
		}
		else = {
			add_to_variable = {
				s_hp = healAmount
			}
		}
	}
	else_if = {
		limit = {
			NOT = {
				has_country_flag = barrad_silver_star_alive
			}
			has_country_flag = barrad_asinti_alive
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = {
			a_hp_t = a_hp_max
		}
		set_temp_variable = {
			l_hp_t = l_hp_max
		}
		add_to_temp_variable = {
			a_hp_t = healAmount
		}
		add_to_temp_variable = {
			l_hp_t = healAmount
		}
		if = {
			limit = {
				check_variable = {
					a_hp_t > a_hp_max
				}
			}
			set_variable = {
				a_hp = a_hp_max
			}
		}
		else = {
			add_to_variable = {
				a_hp = healAmount
			}
		}
		if = {
			limit = {
				check_variable = {
					l_hp_t > l_hp_max
				}
			}
			set_variable = {
				l_hp = l_hp_max
			}
		}
		else = {
			add_to_variable = {
				l_hp = healAmount
			}
		}
	}
	else_if = {
		limit = {
			NOT = {
				has_country_flag = barrad_silver_star_alive
			}
			has_country_flag = barrad_asinti_alive
			NOT = {
				has_country_flag = barrad_leopold_alive
			}
		}
		set_temp_variable = {
			a_hp_t = a_hp_max
		}
		add_to_temp_variable = {
			a_hp_t = healAmount
		}
		if = {
			limit = {
				check_variable = {
					a_hp_t > a_hp_max
				}
			}
			set_variable = {
				a_hp = a_hp_max
			}
		}
		else = {
			add_to_variable = {
				a_hp = healAmount
			}
		}
	}
	else_if = {
		limit = {
			NOT = {
				has_country_flag = barrad_silver_star_alive
			}
			NOT = {
				has_country_flag = barrad_asinti_alive
			}
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = {
			l_hp_t = l_hp_max
		}
		add_to_temp_variable = {
			l_hp_t = healAmount
		}
		if = {
			limit = {
				check_variable = {
					l_hp_t > l_hp_max
				}
			}
			set_variable = {
				l_hp = l_hp_max
			}
		}
		else = {
			add_to_variable = {
				l_hp = healAmount
			}
		}
	}
	subtract_from_variable = {
		a_in = 2
	}
}

BAR_leopold_attack = {
	set_temp_variable = {
		l_hp_half = l_hp
	}
	set_temp_variable = {
		l_hp_qua = l_hp
	}
	divide_temp_variable = {
		l_hp_half = 2
	}
	divide_temp_variable = {
		l_hp_qua = 4
	}
	if = {
		limit = {
			check_variable = {
				l_in > 5
			}
		}
		if = {
			limit = {
				check_variable = {
					var = l_hp
					value = l_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				30 = {
					BAR_leopold_normal_attack = yes
				}
				60 = {
					BAR_leopold_strong_attack = yes
				}
				10 = {
					BAR_leopold_stun = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					l_hp < l_hp_qua
				}
			}
			random_list = {
				80 = {
					BAR_leopold_strong_attack = yes
				}
				20 = {
					BAR_leopold_stun = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					l_hp < l_hp_half
				}
			}
			random_list = {
				20 = {
					BAR_leopold_normal_attack = yes
				}
				70 = {
					BAR_leopold_strong_attack = yes
				}
				10 = {
					BAR_leopold_stun = yes
				}
			}
		}
	}
	else = {
		if = {
			#rest
			limit = {
				check_variable = {
					l_in = 0
				}
			}
			BAR_pentarchy_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = a_hp
						value = a_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = {
							l_in > 2
						}
					}
					random_list = {
						70 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_strong_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						80 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						l_hp < l_hp_qua
					}
				}
				if = {
					limit = {
						check_variable = {
							l_in > 2
						}
					}
					random_list = {
						90 = {
							BAR_leopold_normal_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						80 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						l_hp < l_hp_half
					}
				}
				if = {
					limit = {
						check_variable = {
							l_in > 2
						}
					}
					random_list = {
						70 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_strong_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						90 = {
							BAR_leopold_normal_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
		}
	}
}

BAR_leopold_normal_attack = {
	set_variable = {
		BAR_fight_pentarchy_action = 5
	}
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 3
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 4
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 5
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 6
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 7
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 8
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 9
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 10
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 11
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 12
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 13
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 14
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 15
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 16
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 17
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 18
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 19
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 20
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 21
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 22
			}
		}
	}
	random_list = {
		90 = {
			subtract_from_variable = {
				v_hp = dmgToDeal
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = {
		l_in = 1
	}
}

BAR_leopold_strong_attack = {
	set_variable = {
		BAR_fight_pentarchy_action = 6
	}
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 11
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 12
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 13
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 14
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 15
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 16
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 17
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 18
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 19
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 20
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 21
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 22
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 23
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 24
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 25
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 26
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 27
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 28
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 29
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 30
			}
		}
	}
	random_list = {
		90 = {
			subtract_from_variable = {
				v_hp = dmgToDeal
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = {
		l_in = 3
	}
}

BAR_leopold_stun = {
	set_variable = {
		BAR_fight_pentarchy_action = 7
	}
	random_list = {
		90 = {
			random_list = {
				40 = {
					set_variable = {
						v_stun = 1
					}
				}
				50 = {
					set_variable = {
						v_stun = 2
					}
				}
				10 = {
					set_variable = {
						v_stun = 3
					}
				}
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = {
		l_in = 1
	}
}

BAR_silver_attack = {
	set_temp_variable = {
		s_hp_half = s_hp
	}
	set_temp_variable = {
		s_hp_qua = s_hp
	}
	divide_temp_variable = {
		s_hp_half = 2
	}
	divide_temp_variable = {
		s_hp_qua = 4
	}
	if = {
		limit = {
			check_variable = {
				s_in > 5
			}
		}
		if = {
			limit = {
				check_variable = {
					var = s_hp
					value = s_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				80 = {
					BAR_silver_normal_attack = yes
				}
				20 = {
					BAR_silver_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					s_hp < s_hp_qua
				}
			}
			random_list = {
				40 = {
					BAR_silver_normal_attack = yes
				}
				30 = {
					BAR_silver_lifesteal_attack = yes
				}
				30 = {
					BAR_silver_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					s_hp < s_hp_half
				}
			}
			random_list = {
				60 = {
					BAR_silver_normal_attack = yes
				}
				20 = {
					BAR_silver_lifesteal_attack = yes
				}
				20 = {
					BAR_silver_heal = yes
				}
			}
		}
	}
	else = {
		if = {
			#rest
			limit = {
				check_variable = {
					s_in = 0
				}
			}
			BAR_pentarchy_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = s_hp
						value = s_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = {
							s_in > 1
						}
					}
					random_list = {
						90 = {
							BAR_silver_normal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
			if = {
				limit = {
					check_variable = {
						s_hp < s_hp_qua
					}
				}
				if = {
					limit = {
						check_variable = {
							s_in > 1
						}
					}
					random_list = {
						60 = {
							BAR_silver_normal_attack = yes
						}
						30 = {
							BAR_silver_lifesteal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
			if = {
				limit = {
					check_variable = {
						s_hp < s_hp_half
					}
				}
				if = {
					limit = {
						check_variable = {
							s_in > 1
						}
					}
					random_list = {
						80 = {
							BAR_silver_normal_attack = yes
						}
						10 = {
							BAR_silver_lifesteal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
		}
	}
}

BAR_silver_normal_attack = {
	set_variable = {
		BAR_fight_pentarchy_action = 8
	}
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 2
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 3
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 4
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 5
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 6
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 7
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 8
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 9
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 10
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 11
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 12
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 13
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 14
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 15
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 16
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 17
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 18
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 19
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 20
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 21
			}
		}
	}
	random_list = {
		90 = {
			subtract_from_variable = {
				v_hp = dmgToDeal
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = {
		s_in = 1
	}
}

BAR_silver_lifesteal_attack = {
	set_variable = {
		BAR_fight_pentarchy_action = 9
	}
	random_list = {
		5 = {
			set_temp_variable = {
				dmgToDeal = 5
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 6
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 7
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 8
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 9
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 10
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 11
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 12
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 13
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 14
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 15
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 16
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 17
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 18
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 19
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 20
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 21
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 22
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 23
			}
		}
		5 = {
			set_temp_variable = {
				dmgToDeal = 24
			}
		}
	}
	random_list = {
		90 = {
			subtract_from_variable = {
				v_hp = dmgToDeal
			}
			set_temp_variable = {
				s_hp_temp = s_hp
			}
			add_to_temp_variable = {
				s_hp_temp = dmgToDeal
			}
			if = {
				limit = {
					check_variable = {
						s_hp_max > s_hp_temp
					}
				}
				add_to_variable = {
					s_hp = dmgToDeal
				}
			}
			else = {
				set_variable = {
					s_hp = s_hp_max
				}
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = {
		s_in = 2
	}
}

BAR_silver_heal = {
	set_temp_variable = {
		min = 1000
	}
	random_list = {
		10 = {
			set_temp_variable = {
				healAmount = 24
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 26
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 28
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 30
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 32
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 34
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 36
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 38
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 40
			}
		}
		10 = {
			set_temp_variable = {
				healAmount = 42
			}
		}
	}
	if = {
		limit = {
			check_variable = {
				l_hp > 0
			}
			check_variable = {
				l_hp < min
			}
		}
		set_variable = {
			min = l_hp
		}
		set_variable = {
			heal_target = 2
		}
		set_variable = {
			BAR_fight_pentarchy_action = 10
		}
	}
	if = {
		limit = {
			check_variable = {
				a_hp > 0
			}
			check_variable = {
				a_hp < min
			}
		}
		set_variable = {
			min = a_hp
		}
		set_variable = {
			heal_target = 1
		}
		set_variable = {
			BAR_fight_pentarchy_action = 11
		}
	}
	if = {
		limit = {
			check_variable = {
				s_hp > 0
			}
			check_variable = {
				s_hp < min
			}
		}
		set_variable = {
			min = s_hp
		}
		set_variable = {
			heal_target = 3
		}
		set_variable = {
			BAR_fight_pentarchy_action = 12
		}
	}
	if = {
		limit = {
			check_variable = {
				heal_target = 1
			}
		}
		set_temp_variable = {
			a_hp_temp = a_hp
		}
		add_to_temp_variable = {
			a_hp_temp = healAmount
		}
		if = {
			limit = {
				check_variable = {
					a_hp_max > a_hp_temp
				}
			}
			add_to_variable = {
				a_hp = healAmount
			}
		}
		else = {
			set_variable = {
				a_hp = a_hp_max
			}
		}
	}
	if = {
		limit = {
			check_variable = {
				heal_target = 2
			}
		}
		set_temp_variable = {
			l_hp_temp = l_hp
		}
		add_to_temp_variable = {
			l_hp_temp = healAmount
		}
		if = {
			limit = {
				check_variable = {
					l_hp_max > l_hp_temp
				}
			}
			add_to_variable = {
				l_hp = healAmount
			}
		}
		else = {
			set_variable = {
				l_hp = l_hp_max
			}
		}
	}
	if = {
		limit = {
			check_variable = {
				heal_target = 3
			}
		}
		set_temp_variable = {
			s_hp_temp = a_hp
		}
		add_to_temp_variable = {
			s_hp_temp = healAmount
		}
		if = {
			limit = {
				check_variable = {
					s_hp_max > s_hp_temp
				}
			}
			add_to_variable = {
				s_hp = healAmount
			}
		}
		else = {
			set_variable = {
				s_hp = s_hp_max
			}
		}
	}
	subtract_from_variable = {
		s_in = 2
	}
}

BAR_pentarchy_rest = {
	set_variable = {
		BAR_fight_pentarchy_action = 4
	}
	if = {
		limit = {
			has_country_flag = barrad_asinti_alive
		}
		if = {
			limit = {
				check_variable = {
					a_in < 10
				}
			}
			add_to_variable = {
				a_in = 2
			}
		}
		else = {
			set_variable = {
				a_in = 10
			}
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
		}
		if = {
			limit = {
				check_variable = {
					s_in < 10
				}
			}
			add_to_variable = {
				s_in = 2
			}
		}
		else = {
			set_variable = {
				s_in = 10
			}
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_leopold_alive
		}
		if = {
			limit = {
				check_variable = {
					l_in < 10
				}
			}
			add_to_variable = {
				l_in = 2
			}
		}
		else = {
			set_variable = {
				l_in = 10
			}
		}
	}
}

BAR_clear_vars_fight = {
	clear_variable = a_hp
	clear_variable = a_hp_max
	clear_variable = a_in
	clear_variable = l_hp
	clear_variable = l_hp_max
	clear_variable = l_in
	clear_variable = s_hp
	clear_variable = s_hp_max
	clear_variable = s_in
	clear_variable = v_hp
	clear_variable = v_hp_max
	clear_variable = v_in
	clear_variable = heal_target
	clear_variable = character_attacking
	clear_variable = viira_dmg_debuff
	clear_variable = v_stun
}
